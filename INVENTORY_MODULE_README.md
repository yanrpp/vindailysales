# üì¶ Inventory Management Module

‡πÇ‡∏°‡∏î‡∏π‡∏•‡∏≠‡∏¥‡∏™‡∏£‡∏∞‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏¢‡∏≤‡πÅ‡∏•‡∏∞‡∏™‡∏ï‡πá‡∏≠‡∏Å ‡πÅ‡∏¢‡∏Å‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö Drug Management

## üèóÔ∏è ‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á

### Database Tables
- `products` - ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏¢‡∏≤ (product_code, description, um, cost)
- `product_lots` - ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• lot ‡∏Ç‡∏≠‡∏á‡∏¢‡∏≤ (product_id, lot_no, exp)
- `product_stock_records` - ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏™‡∏ï‡πá‡∏≠‡∏Å‡∏¢‡∏≤ (lot_id, report_date, qty, store_location)

### API Endpoints
- `POST /api/upload-inventory` - ‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏ü‡∏•‡πå Excel ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏¢‡∏≤
- `GET /api/inventory/products` - ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏¢‡∏≤ + Lot
- `GET /api/inventory/non-moving` - ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏¢‡∏≤‡∏Ñ‡πâ‡∏≤‡∏á‡∏™‡∏ï‡πä‡∏≠‡∏Å 6 ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô
- `GET /api/inventory/expired` - ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏¢‡∏≤‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏

### Pages
- `/inventory` - Dashboard ‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°
- `/upload-inventory` - ‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏ü‡∏•‡πå‡∏¢‡∏≤
- `/inventory/products` - ‡πÅ‡∏™‡∏î‡∏á‡∏¢‡∏≤ + Lot
- `/inventory/non-moving` - ‡∏¢‡∏≤‡∏Ñ‡πâ‡∏≤‡∏á‡∏™‡∏ï‡πä‡∏≠‡∏Å 6 ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô
- `/inventory/expired` - ‡∏¢‡∏≤‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏

## üìã ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô

### 1. Setup Database
‡∏£‡∏±‡∏ô SQL migration ‡πÉ‡∏ô Supabase:
```sql
-- ‡πÑ‡∏ü‡∏•‡πå: supabase-migrations/create_inventory_tables.sql
```

### 2. ‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏ü‡∏•‡πå‡∏¢‡∏≤
1. ‡πÑ‡∏õ‡∏ó‡∏µ‡πà `/upload-inventory`
2. ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏ü‡∏•‡πå Excel (.xlsx)
3. ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡∏´‡∏•‡∏≤‡∏¢‡πÑ‡∏ü‡∏•‡πå‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Å‡∏±‡∏ô
4. ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞ parse ‡πÅ‡∏•‡∏∞‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥

### 3. ‡∏î‡∏π‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏¢‡∏≤
- **Dashboard**: `/inventory` - ‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡∏¢‡∏≤
- **‡∏¢‡∏≤ + LOT**: `/inventory/products` - ‡πÅ‡∏™‡∏î‡∏á‡∏¢‡∏≤‡∏û‡∏£‡πâ‡∏≠‡∏° lot ‡πÅ‡∏•‡∏∞‡∏¢‡∏≠‡∏î‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠
- **‡∏Ñ‡πâ‡∏≤‡∏á‡∏™‡∏ï‡πä‡∏≠‡∏Å 6 ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô**: `/inventory/non-moving` - ‡∏¢‡∏≤‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡πÄ‡∏Ñ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏´‡∏ß
- **‡∏¢‡∏≤‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏**: `/inventory/expired` - ‡∏¢‡∏≤‡∏ó‡∏µ‡πà exp < CURRENT_DATE

## üìä ‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå Excel

### Format ‡∏ó‡∏µ‡πà‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö:
- **‡πÅ‡∏ñ‡∏ß A row2**: ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô (report_date)
- **‡∏™‡∏µ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß (‡∏£‡∏´‡∏±‡∏™‡∏¢‡∏≤)**: 
  - Column A: product_code
  - Column B: description
  - Column C: um (Unit of Measure)
  - Column D: cost
- **‡πÅ‡∏ñ‡∏ß lot**: 
  - Column A: lot_no (6 ‡∏´‡∏•‡∏±‡∏Å DDMMYY)
  - Column F: qty (‡∏à‡∏≥‡∏ô‡∏ß‡∏ô)
  - Column G: store_location (‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡πá‡∏ö)

### ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á:
```
Row 1: [Report Date: 2025-01-15]
Row 2: [XA11SETDR1, BASIC DRESSING PACK..., SE, 1.00]
Row 3: [030523, ..., 12, D5 ‡∏´‡πâ‡∏≠‡∏á‡∏¢‡∏≤‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£ 5]
```

## üîß Technical Details

### Parse Logic
- ‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö‡πÅ‡∏ñ‡∏ß‡∏¢‡∏≤: colA ‡πÄ‡∏õ‡πá‡∏ô string ‡∏¢‡∏≤‡∏ß‡∏Å‡∏ß‡πà‡∏≤ 3 ‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£ + ‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏ô column C
- ‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö lot: colA ‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç 6 ‡∏´‡∏•‡∏±‡∏Å (DDMMYY)
- ‡πÅ‡∏õ‡∏•‡∏á lot_no ‡πÄ‡∏õ‡πá‡∏ô expiry date: `20YY-MM-DD`

### Data Flow
1. Upload Excel ‚Üí Parse ‚Üí Extract records
2. Upsert products (onConflict: product_code)
3. Upsert product_lots (onConflict: product_id, lot_no)
4. Insert product_stock_records

## üöÄ Features

‚úÖ ‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡∏´‡∏•‡∏≤‡∏¢‡πÑ‡∏ü‡∏•‡πå‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Å‡∏±‡∏ô  
‚úÖ Auto-detect product ‡πÅ‡∏•‡∏∞ lot  
‚úÖ Dashboard ‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°  
‚úÖ ‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö‡∏¢‡∏≤‡∏Ñ‡πâ‡∏≤‡∏á‡∏™‡∏ï‡πä‡∏≠‡∏Å 6 ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô  
‚úÖ ‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö‡∏¢‡∏≤‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏  
‚úÖ Search ‡πÅ‡∏•‡∏∞ filter  
‚úÖ Responsive UI  

## üìù Notes

- ‡πÇ‡∏°‡∏î‡∏π‡∏•‡∏ô‡∏µ‡πâ‡πÅ‡∏¢‡∏Å‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö Drug Management ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå
- ‡πÉ‡∏ä‡πâ‡∏ï‡∏≤‡∏£‡∏≤‡∏á database ‡πÅ‡∏¢‡∏Å‡∏ï‡πà‡∏≤‡∏á‡∏´‡∏≤‡∏Å
- API endpoints ‡πÅ‡∏¢‡∏Å‡∏ï‡πà‡∏≤‡∏á‡∏´‡∏≤‡∏Å
- UI/UX ‡πÅ‡∏¢‡∏Å‡∏ï‡πà‡∏≤‡∏á‡∏´‡∏≤‡∏Å

